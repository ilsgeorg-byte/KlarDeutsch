# üîß Architectural Improvements - KlarDeutsch

## üìä –†–µ–∑—é–º–µ

**–î–∞—Ç–∞:** 1 –º–∞—Ä—Ç–∞ 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**Backend —É–ª—É—á—à–µ–Ω–∏—è:** 4  
**Frontend —É–ª—É—á—à–µ–Ω–∏—è:** 2

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –ë–î —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –∫–∞–∂–¥–æ–º —Ä–æ—É—Ç–µ –≤—Ä—É—á–Ω—É—é –≤—ã–∑—ã–≤–∞–ª–∏—Å—å `conn.close()`, —á—Ç–æ –º–æ–≥–ª–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É—Ç–µ—á–∫–∞–º –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä `get_db_cursor()`.

**–§–∞–π–ª—ã:**
- `api/db.py` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω `@contextmanager`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from db import get_db_cursor

# –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É—Ç–µ—á–∫–∞–º)
conn = get_db_connection()
try:
    cur = conn.cursor()
    cur.execute("SELECT * FROM words")
    results = cur.fetchall()
finally:
    cur.close()
    conn.close()

# –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
with get_db_cursor() as cur:
    cur.execute("SELECT * FROM words")
    results = cur.fetchall()
# –ö—É—Ä—Å–æ—Ä –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π commit/rollback
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ –ß–∏—â–µ –∫–æ–¥

---

### 2. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ .env

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `diary.py` –±—ã–ª–∞ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ `.env.local` —Å –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ–º –ø—É—Ç–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –≤ `index.py` (—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è).

**–§–∞–π–ª—ã:**
- `api/index.py` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –≤ –Ω–∞—á–∞–ª–µ
- `api/routes/diary.py` ‚Äî —É–±—Ä–∞–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```diff
# diary.py
- env_path = os.path.join(os.path.dirname(os.path.dirname(os.path.dirname(__file__))), '.env.local')
- load_dotenv(env_path)
+ # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ index.py
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ –ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ —Å –ø—É—Ç—è–º–∏
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–ø—É—Å–∫ –º–æ–¥—É–ª–µ–π

---

### 3. Pydantic –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** –†—É—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∫–∞–∂–¥–æ–º —Ä–æ—É—Ç–µ (`if level not in allowed_levels`).

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `schemas.py` —Å Pydantic –º–æ–¥–µ–ª—è–º–∏.

**–§–∞–π–ª—ã:**
- `api/schemas.py` ‚Äî –≤—Å–µ —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `api/routes/trainer.py` ‚Äî –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä—ã —Å—Ö–µ–º:**
```python
from schemas import TrainingQuery, RateWordRequest, VALID_LEVELS

# –í–∞–ª–∏–¥–∞—Ü–∏—è query –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
query = TrainingQuery(
    level=request.args.get("level", "A1").upper(),
    limit=int(request.args.get("limit", 10))
)
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: level ‚àà {"A1","A2","B1","B2","C1"}
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: 1 <= limit <= 100

# –í–∞–ª–∏–¥–∞—Ü–∏—è JSON —Ç–µ–ª–∞
rate_data = RateWordRequest.model_validate(request.json or {})
# word_id: int > 0
# rating: Literal[0, 1, 3, 5]
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ö–µ–º—ã:**

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—Ö–µ–º—ã |
|-----------|-------|
| **Auth** | `UserRegister`, `UserLogin` |
| **Words** | `WordCreate`, `WordSearch`, `WordQuery` |
| **Trainer** | `RateWordRequest`, `TrainingQuery` |
| **Diary** | `DiaryCorrectionRequest`, `DiaryWordsAdd` |
| **Audio** | `AudioListQuery`, `AudioDeleteRequest` |
| **Response** | `WordResponse`, `PaginatedWordsResponse`, `StatsResponse` |

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ docstrings
- ‚úÖ IDE –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç

---

### 4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ print

**–ü—Ä–æ–±–ª–µ–º–∞:** `print()` –≤—ã–∑–æ–≤—ã –ø–æ –≤—Å–µ–º—É –∫–æ–¥—É –±–µ–∑ —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Python.

**–§–∞–π–ª—ã:**
- `api/index.py` ‚Äî –±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `api/db.py` ‚Äî `logger.error()` –≤–º–µ—Å—Ç–æ `print()`
- `api/routes/*.py` ‚Äî `logger.debug()/info()/warning()`

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```python
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger(__name__)
```

**–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
- `DEBUG` ‚Äî –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (dev —Ä–µ–∂–∏–º)
- `INFO` ‚Äî –æ–±—ã—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- `WARNING` ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–∏—Å—Ç—ë–∫—à–∏–π —Ç–æ–∫–µ–Ω)
- `ERROR` ‚Äî –æ—à–∏–±–∫–∏ (–Ω–µ—É–¥–∞—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ –ë–î)

---

### 5. API –∫–ª–∏–µ–Ω—Ç –¥–ª—è frontend (axios)

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç–∞–≤–∞–ª—Å—è –≤—Ä—É—á–Ω—É—é –≤ –∫–∞–∂–¥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω –µ–¥–∏–Ω—ã–π `apiClient` —Å –∏–Ω—Ç–µ—Ä—Å–µ–ø—Ç–æ—Ä–∞–º–∏.

**–§–∞–π–ª—ã:**
- `app/lib/api.ts` ‚Äî API –∫–ª–∏–µ–Ω—Ç
- `app/lib/hooks.ts` ‚Äî React —Ö—É–∫–∏

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
```typescript
import { authApi, wordsApi, trainerApi } from '@/lib/api';

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ–∫–µ–Ω–∞
const token = getToken(); // –∏–∑ localStorage
await wordsApi.getWords(); // Authorization: Bearer <token>

// –û–±—Ä–∞–±–æ—Ç–∫–∞ 401 (–∏—Å—Ç—ë–∫—à–∏–π —Ç–æ–∫–µ–Ω)
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ login —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏–µ 'auth-error'

// –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–∑–æ–≤ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
const { data, error } = await apiCall(() => trainerApi.getStats());
```

**API –º–µ—Ç–æ–¥—ã:**

| –ú–æ–¥—É–ª—å | –ú–µ—Ç–æ–¥—ã |
|--------|--------|
| **authApi** | `register`, `login`, `me`, `logout` |
| **wordsApi** | `getWords`, `getWord`, `searchWords`, `addFavorite`, `getFavorites`, `addCustomWord` |
| **trainerApi** | `getTrainingWords`, `rateWord`, `getStats` |
| **diaryApi** | `correctText`, `getHistory`, `deleteEntry`, `extractWords`, `addWords` |
| **audioApi** | `uploadAudio`, `listAudio`, `deleteAudio` |

---

### 6. SWR –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (loading, error, data) –≤ –∫–∞–∂–¥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ.

**–†–µ—à–µ–Ω–∏–µ:** –•—É–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ SWR —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

**–§–∞–π–ª—ã:**
- `app/lib/hooks.ts` ‚Äî –≥–æ—Ç–æ–≤—ã–µ —Ö—É–∫–∏

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```typescript
import { useWords, useTrainingWords, useStats } from '@/lib/hooks';

function WordsList() {
  const { words, isLoading, isError, mutate } = useWords('A1', 0, 20);
  
  if (isLoading) return <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>;
  if (isError) return <div>–û—à–∏–±–∫–∞</div>;
  
  return (
    <ul>
      {words.map(word => (
        <li key={word.id}>{word.de} - {word.ru}</li>
      ))}
    </ul>
  );
}
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ SWR:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –æ–∫–Ω–∞
- ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (5 —Å–µ–∫)
- ‚úÖ –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ `mutate()` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—ç—à–∞

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ö—É–∫–∏:**

| –•—É–∫ | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ |
|-----|----------|----------------|
| `useWords(level, skip, limit)` | –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤ | –ù–µ—Ç |
| `useWordSearch(query, limit)` | –ü–æ–∏—Å–∫ —Å–ª–æ–≤ | –ù–µ—Ç |
| `useFavorites()` | –ò–∑–±—Ä–∞–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ | –ù–µ—Ç |
| `useTrainingWords(level, limit)` | –°–ª–æ–≤–∞ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ | –ù–µ—Ç |
| `useStats()` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫ |
| `useDiaryHistory()` | –ò—Å—Ç–æ—Ä–∏—è –¥–Ω–µ–≤–Ω–∏–∫–∞ | –ù–µ—Ç |
| `useAudioList(limit)` | –°–ø–∏—Å–æ–∫ –∞—É–¥–∏–æ | –ù–µ—Ç |

---

## üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### Backend

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ç—Ä–æ–∫ |
|------|-----------|-------|
| `api/db.py` (–æ–±–Ω–æ–≤–ª—ë–Ω) | –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä | +40 |
| `api/schemas.py` | Pydantic —Å—Ö–µ–º—ã | 180 |
| `api/index.py` (–æ–±–Ω–æ–≤–ª—ë–Ω) | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, .env –∑–∞–≥—Ä—É–∑–∫–∞ | +30 |
| `api/routes/diary.py` (–æ–±–Ω–æ–≤–ª—ë–Ω) | –£–±—Ä–∞–Ω–∞ .env –∑–∞–≥—Ä—É–∑–∫–∞ | -5 |
| `api/routes/trainer.py` (–æ–±–Ω–æ–≤–ª—ë–Ω) | Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è | +15 |

### Frontend

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ç—Ä–æ–∫ |
|------|-----------|-------|
| `app/lib/api.ts` | API –∫–ª–∏–µ–Ω—Ç axios | 250 |
| `app/lib/hooks.ts` | SWR —Ö—É–∫–∏ | 180 |

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### Backend

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
cd api
pip install pydantic
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
```bash
python app.py
```

### Frontend

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
cd app
npm install swr axios
```

2. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ö—É–∫–∏:**
```typescript
import { useWords, useStats } from '@/lib/hooks';
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (–ë–î)** | 10+ —Ñ–∞–π–ª–æ–≤ | 0 | ‚úÖ 100% |
| **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (.env)** | 5 —Ñ–∞–π–ª–æ–≤ | 1 —Ñ–∞–π–ª | ‚úÖ 80% |
| **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** | –†—É—á–Ω–∞—è | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è | ‚úÖ |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ë–î** | `print()` | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–º** | –í—Ä—É—á–Ω—É—é –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | ‚úÖ |
| **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** | –ù–µ—Ç | SWR | ‚úÖ |

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

- [x] –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –ë–î
- [x] –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ .env
- [x] Pydantic —Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ print
- [x] API –∫–ª–∏–µ–Ω—Ç —Å axios
- [x] SWR —Ö—É–∫–∏ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ 401
- [x] –¢–∏–ø–∏–∑–∞—Ü–∏—è TypeScript

---

## üîÑ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Backend (Python)

```python
# –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Pydantic
from schemas import TrainingQuery, RateWordRequest

@trainer_bp.route('/words', methods=['GET'])
@token_required
def get_training_words():
    query = TrainingQuery(
        level=request.args.get("level", "A1").upper(),
        limit=int(request.args.get("limit", 10))
    )
    # query.level –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω
    # query.limit –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω (1-100)

# –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –ë–î
from db import get_db_cursor

with get_db_cursor() as cur:
    cur.execute("SELECT * FROM words WHERE level = %s", (query.level,))
    words = cur.fetchall()
# –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### Frontend (TypeScript)

```typescript
// –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
function WordsList() {
  const { words, isLoading, isError } = useWords('A1');
  
  if (isLoading) return <Spinner />;
  if (isError) return <ErrorMessage />;
  
  return <WordsGrid words={words} />;
}

// –ú—É—Ç–∞—Ü–∏—è —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∫—ç—à–∞
function AddWordButton() {
  const { mutate } = useWords('A1');
  
  const handleAdd = async () => {
    await wordsApi.addCustomWord({ de: 'Haus', ru: '–î–æ–º' });
    await mutate(); // –û–±–Ω–æ–≤–∏—Ç—å –∫—ç—à
  };
  
  return <button onClick={handleAdd}>–î–æ–±–∞–≤–∏—Ç—å</button>;
}

// –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ API
import { authApi, setToken } from '@/lib/api';

async function handleLogin(email: string, password: string) {
  const response = await authApi.login(email, password);
  setToken(response.data.token); // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω
  // –î–∞–ª—å–Ω–µ–π—à–∏–µ –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç —Å —Ç–æ–∫–µ–Ω–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
}
```

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–∞ –Ω–æ–≤—ã–µ —Ö—É–∫–∏**
   - –ó–∞–º–µ–Ω–∏—Ç—å —Ä—É—á–Ω—ã–µ `fetch` –Ω–∞ `useWords`, `useStats`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `apiClient` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤

2. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫**
   - –ì–ª–æ–±–∞–ª—å–Ω—ã–π error boundary –¥–ª—è API –æ—à–∏–±–æ–∫
   - Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –æ—à–∏–±–æ–∫ –º—É—Ç–∞—Ü–∏–π

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `refreshInterval` –¥–ª—è —á–∞—Å—Ç–æ –º–µ–Ω—è—é—â–∏—Ö—Å—è –¥–∞–Ω–Ω—ã—Ö
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `revalidateOnFocus` –¥–ª—è –≤–∞–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Unit-—Ç–µ—Å—Ç—ã –¥–ª—è Pydantic —Å—Ö–µ–º
   - Integration-—Ç–µ—Å—Ç—ã –¥–ª—è API —Ö—É–∫–æ–≤

---

**–î–∞—Ç–∞:** 1 –º–∞—Ä—Ç–∞ 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–°–ª–µ–¥—É—é—â–∏–π –∞—É–¥–∏—Ç:** 1 –∞–ø—Ä–µ–ª—è 2026
